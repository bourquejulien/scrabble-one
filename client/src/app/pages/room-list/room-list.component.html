<mat-toolbar class="toolbar" color="primary">
    <span>Salle d'attente</span>
</mat-toolbar>
<div>
    <button mat-raised-button color="primary" mat-button routerLink="/settings" (click)="reset()" class="exit-button">
        Retourner à la selection des modes de jeu!
    </button>

    <button mat-raised-button color="primary" class="random-game-button" *ngIf="availableGameConfigs.length !== 0" (click)="randomJoin()">
        Placement aléatoire
    </button>
</div>
<div class="container" (click)="reset()">
    <mat-card class="room-container">
        <div class="list" *ngIf="availableGameConfigs.length !== 0">
            <mat-action-list *ngFor="let config of availableGameConfigs; let i = index">
                <button mat-list-item (click)="selectedConfig = config; $event.stopPropagation()">
                    <mat-icon matListIcon>groups</mat-icon>
                    <h3 matLine>Salle {{ i + 1 }}</h3>
                    <p matLine>
                        <span> Une personne en attente : {{ config.waitingPlayerName }} </span>
                    </p>
                </button>
            </mat-action-list>
        </div>
        <div class="empty-list" *ngIf="availableGameConfigs.length === 0">
            <mat-icon matListIcon>groups</mat-icon>
            <h3 matLine>Aucune salle à rejoindre</h3>
        </div>
    </mat-card>

    <div class="room-info" *ngIf="selectedConfig !== null" [@slideAnimation] (click)="$event.stopPropagation()" color="#eae7dc">
        <mat-card class="room-info-bg">
            <div class="info-card" color="#eae7dc">
                <mat-icon matListIcon>infos</mat-icon>
                <br />
                <mat-label>Partie classique</mat-label>
                <h3 matLine>Nom : {{ selectedConfig.waitingPlayerName }}</h3>
                <h3 matLine>Durée des tours : {{ selectedConfig.playTimeMs | date: 'mm:ss' }}</h3>
                <h3 matLine>Type de bonus : {{ selectedConfig.isRandomBonus ? 'Aléatoires' : 'Standards' }}</h3>
            </div>
            <mat-card class="form-card" (keydown.enter)="join()">
                <div>
                    <mat-form-field style="margin-right: 15px" appearance="fill">
                        <mat-label>Joueur</mat-label>
                        <input matInput placeholder="Joueur" name="name" id="inputName" [(ngModel)]="this.nameValidator.name" />
                    </mat-form-field>
                </div>
                <div>
                    <button id="join-button" mat-raised-button (click)="this.join()" color="primary">Rejoindre</button>
                </div>
                <div *ngFor="let error of this.errorsList" class="error">{{ error }}</div>
            </mat-card>
        </mat-card>
    </div>
</div>

<ng-template #alertDialog>
    <div class="error-dialog">
        <div class="error">
            La partie sélectionnée n'est plus disponible.
            <br />
            Veuillez en choisir une autre.
        </div>

        <button mat-raised-button mat-dialog-close color="primary">Confirmer</button>
    </div>
</ng-template>
